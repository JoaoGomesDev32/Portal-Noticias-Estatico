<%- include('partials/header.ejs') %>

<section class="noticia-destaque mt-4">
  <div class="center">
    <% if (posts && posts.length > 0) { %>
      <div class="img-destaque img-hover-zoom card">
        <div class="overlay-destaque"></div>
        <div class="title-destaque-descricao">
          <a href="<%= posts[0].slug %>" class="link"><h2><%= posts[0].titulo %></h2></a>
          <p><%- posts[0].descricaoCurta %></p>
        </div>
        <img src="<%= posts[0].imagem %>" class="img-rounded" referrerpolicy="no-referrer" onerror="this.onerror=null;this.src='/public/images/landscape.jpg';" />
      </div>
    <% } else { %>
      <div class="feedback error">Nenhuma notícia encontrada.</div>
    <% } %>
  </div>
</section>

<section class="outras-noticias mt-4">
  <div class="title-outras-noticias">
    <h2 class="section-title">Últimas Notícias</h2>
    <div class="center home-grid">
      <div class="ultimas home-grid-main">
        <% if (posts && posts.length > 1) { %>
          <% for(let i = 1; i < Math.min(posts.length, 7); i++) { %>
          <div class="box-ultima-single card mb-2">
            <div class="img-hover-zoom">
              <img src="<%= posts[i].imagem %>" class="img-rounded" referrerpolicy="no-referrer" onerror="this.onerror=null;this.src='/public/images/landscape.jpg';" />
            </div>
            <div class="conteudo-noticia-single">
              <h3><%= posts[i].categoria %></h3>
              <h2><%= posts[i].titulo %></h2>
              <p><%- posts[i].descricaoCurta %></p>
              <a href="<%= posts[i].slug %>" class="btn mt-2">Saiba mais</a>
            </div>
          </div>
          <% } %>
        <% } else { %>
          <div class="feedback">Nenhuma outra notícia cadastrada.</div>
        <% } %>
      </div>
      <aside class="mais-lidas card home-grid-sidebar compact-mais-lidas">
        <h3 class="mais-lidas-title"><i class="fa fa-star" style="color:#eebf63;margin-right:6px;"></i>Mais Lidas</h3>
        <div class="mas-lidas-noticias compact-mais-lidas-list">
          <% for(let i = 0; i < Math.min(postsTop.length, 4); i++) { %>
          <div class="mais-lida-noticia-single compact-mais-lida-item">
            <div class="img-hover-zoom compact-mais-lida-img" style="width: 44px; height: 44px;">
              <img src="<%= postsTop[i].imagem %>" class="img-rounded" style="width:100%;height:100%;object-fit:cover;" referrerpolicy="no-referrer" onerror="this.onerror=null;this.src='/public/images/landscape.jpg';" />
            </div>
            <div class="texto-mais-lida-single compact-mais-lida-text">
              <h4><%= postsTop[i].titulo %></h4>
              <a href="<%= postsTop[i].slug %>" class="link">Ler</a>
            </div>
          </div>
          <% } %>
        </div>
      </aside>
    </div>
  </div>
</section>

<%- include('partials/footer.ejs') %>
